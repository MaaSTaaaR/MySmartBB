/* SCEditor v3.1.1 | (C) 2017, Sam Clarke | sceditor.com/license */
!function(){"use strict";var e=(eE=jQuery)&&"object"==typeof eE&&"default"in eE?eE:{default:eE};function t(e,t){return typeof t===e}var n=t.bind(null,"string"),o=t.bind(null,"undefined"),r=t.bind(null,"function"),i=t.bind(null,"number");function a(e){return!Object.keys(e).length}function l(e,t){var n=!!e===e,r=n?2:1,i=n?t:e,a=n&&e;function s(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}for(;r<arguments.length;r++){var c,u=arguments[r];for(c in u){var d,f,p=i[c],m=u[c];o(m)||"__proto__"!==c&&"constructor"!==c&&(f=s(m),d=Array.isArray(m),a&&(f||d)?(f=s(p)===f&&Array.isArray(p)===d,i[c]=l(!0,f?p:d?[]:{},m)):i[c]=m)}}return i}function s(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function c(e,t){if(Array.isArray(e)||"length"in e&&i(e.length))for(var n=0;n<e.length;n++)t(n,e[n]);else Object.keys(e).forEach(function(n){t(n,e[n])})}var u={},d=3;function f(e){return isFinite(e=parseFloat(e))?e:0}function p(e,t,n){var o=(n||document).createElement(e);return c(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function m(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||E(n,t))return n}function h(e,t){return E(e,t)?e:m(e,t)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function v(e,t){e.appendChild(t)}function y(e,t){return e.querySelectorAll(t)}function $(e,t,o,r,i){t.split(" ").forEach(function(t){var a;n(o)?(a=r["_sce-event-"+t+o]||function(t){for(var n=t.target;n&&n!==e;){if(E(n,o))return void r.call(n,t);n=n.parentNode}},r["_sce-event-"+t+o]=a):(a=o,i=r),e.addEventListener(t,a,i||!1)})}function b(e,t,o,r,i){t.split(" ").forEach(function(t){var a;n(o)?a=r["_sce-event-"+t+o]:(a=o,i=r),e.removeEventListener(t,a,i||!1)})}function _(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?x(e,t):e.setAttribute(t,n)}function x(e,t){e.removeAttribute(t)}function w(e){C(e,"display","none")}function k(e){C(e,"display","")}function T(e){(O(e)?w:k)(e)}function C(e,t,o){if(arguments.length<3){if(n(t))return 1===e.nodeType?getComputedStyle(e)[t]:null;c(t,function(t,n){C(e,t,n)})}else{var r=(o||0===o)&&!isNaN(o);e.style[t]=r?o+"px":o}}function S(e,t,n){var o=arguments.length,r={};if(1===e.nodeType)return 1===o?(c(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(r[t.name.substr(5)]=t.value)}),r):2===o?_(e,"data-"+t):void _(e,"data-"+t,String(n))}function E(e,t){return!!e&&1===e.nodeType&&(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t)}function D(e,t){return t.parentNode.insertBefore(e,t)}function N(e){return e.className.trim().split(/\s+/)}function M(e,t){return E(e,"."+t)}function A(e,t){var n=N(e);0>n.indexOf(t)&&n.push(t),e.className=n.join(" ")}function R(e,t){var n=N(e);s(n,t),e.className=n.join(" ")}function B(e,t,n){((n=o(n)?!M(e,t):n)?A:R)(e,t)}function F(e,t){if(o(t)){var n=f((r=getComputedStyle(e)).paddingLeft)+f(r.paddingRight),r=f(r.borderLeftWidth)+f(r.borderRightWidth);return e.offsetWidth-n-r}C(e,"width",t)}function H(e,t){if(o(t)){var n=f((r=getComputedStyle(e)).paddingTop)+f(r.paddingBottom),r=f(r.borderTopWidth)+f(r.borderBottomWidth);return e.offsetHeight-n-r}C(e,"height",t)}function I(e,t,n){var o;r(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function O(e){return e.getClientRects().length}function z(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===z(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function L(e,t,n,o){z(e,t,n,o,!0)}function P(e,t){var n=(t=t||document).createDocumentFragment(),o=p("div",{},t);for(o.innerHTML=e;o.firstChild;)v(n,o.firstChild);return n}function U(e){return e&&(!E(e,"p,div")||e.className||_(e,"style")||!a(S(e)))}function j(e,t){var n=p(t,{},e.ownerDocument);for(c(e.attributes,function(e,t){try{_(n,t.name,t.value)}catch(o){}});e.firstChild;)v(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var W="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|";function q(e){return!!/11?|9/.test(e.nodeType)&&0>"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")}function V(e,t){var n=(e||{}).nodeType||d;return 1!==n?n===d:"code"===(e=e.tagName.toLowerCase())?!t:0>W.indexOf("|"+e+"|")}function G(e){return e.lastChild&&G(e.lastChild)&&g(e.lastChild),3===e.nodeType?!e.nodeValue:q(e)&&!e.childNodes.length}function Y(e){z(e,function(e){var t=!V(e,!0)&&8!==e.nodeType,n=e.parentNode;if(t&&(V(n,!0)||"P"===n.tagName)){for(var o=e;V(o.parentNode,!0)||"P"===o.parentNode.tagName;)o=o.parentNode;for(var r=Q(o,e),i=e;n&&V(n,!0);){if(1===n.nodeType){for(var a=n.cloneNode();i.firstChild;)v(a,i.firstChild);v(i,a)}n=n.parentNode}D(i,o),G(r)||D(r,i),G(o)&&g(o)}t&&E(e,"ul,ol")&&E(e.parentNode,"ul,ol")&&(r="li",t=(t=e).previousElementSibling,(t=r&&t&&!E(t,r)?null:t)||D(t=p("li"),e),v(t,e))})}function K(e,t){return e?(t?e.previousSibling:e.nextSibling)||K(e.parentNode,t):null}function X(e){var t,n,o,r,i,a,l=C(e,"whiteSpace"),s=/line$/i.test(l),c=e.firstChild;if(!/pre(\-wrap)?$/i.test(l))for(;c;){if(i=c.nextSibling,t=c.nodeValue,1===(a=c.nodeType)&&c.firstChild&&X(c),a===d){for(n=K(c),o=K(c,!0),a=!1;M(o,"sceditor-ignore");)o=K(o,!0);if(V(c)&&o){for(r=o;r.lastChild;)for(r=r.lastChild;M(r,"sceditor-ignore");)r=K(r,!0);a=r.nodeType===d?/[\t\n\r ]$/.test(r.nodeValue):!V(r)}t=t.replace(/\u200B/g,""),o&&V(o)&&!a||(t=t.replace(s?/^[\t ]+/:/^[\t\n\r ]+/,"")),(t=n&&V(n)?t:t.replace(s?/[\t ]+$/:/[\t\n\r ]+$/,"")).length?c.nodeValue=t.replace(s?/[\t ]+/g:/[\t\n\r ]+/g," "):g(c)}c=i}}function Q(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function Z(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function J(e,t){var n=e.style;return u[t]||(u[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),n=n[t=u[t]],"textAlign"===t&&(n=n||C(e,t),C(e.parentNode,t)===n||"block"!==C(e,"display")||E(e,"hr,th"))?"":n}function ee(e,t){var n=e.attributes.length;if(n===t.attributes.length){for(;n--;){var o=e.attributes[n];if("style"===o.name?!function(e,t){var n=e.style.length;if(n===t.style.length){for(;n--;){var o=e.style[n];if(e.style[o]!==t.style[o])return}return 1}}(e,t):o.value!==_(t,o.name))return}return 1}}function et(e){for(;e.firstChild;)D(e.firstChild,e);g(e)}var en={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:_(document.documentElement,"lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,allowedIframeUrls:[],parserOptions:{},dropDownCss:{}},eo=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i;function er(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function ei(e,t){if(!e)return e;var n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"};return!1!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})}var ea={html:'<!DOCTYPE html><html{attrs}><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /><link rel="stylesheet" href="look/fonts/font-awesome.min.css" /><link rel="stylesheet" href="look/fonts/fonts.css" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="image">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube-nocookie.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'};function el(e,t,n){var o=ea[e];return Object.keys(t).forEach(function(e){o=o.replace(RegExp(er("{"+e+"}"),"g"),t[e])}),o=n?P(o):o}function es(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t=t&&t.nextSibling}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&(/^pre/.test(C(n.parentNode,"whiteSpace"))||g(n)),n=t}}var ec={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{state:function(e){if(e=e&&3===e.nodeType?e.parentNode:e){var t="ltr"===C(e,"direction"),e=C(e,"textAlign");return/left/.test(e)||e===(t?"start":"end")}},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){if(e=e&&3===e.nodeType?e.parentNode:e){var t="ltr"===C(e,"direction"),e=C(e,"textAlign");return/right/.test(e)||e===(t?"end":"start")}},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(e,t,n){var o=p("div");$(o,"click","a",function(t){n(S(this,"font")),e.closeDropDown(!0),t.preventDefault()}),e.opts.fonts.split(",").forEach(function(e){v(o,el("fontOpt",{font:e},!0))}),e.createDropDown(t,"font-picker",o)},exec:function(e){var t=this;ec.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(e,t,n){var o=p("div");$(o,"click","a",function(t){n(S(this,"size")),e.closeDropDown(!0),t.preventDefault()});for(var r=1;r<=7;r++)v(o,el("sizeOpt",{size:r},!0));e.createDropDown(t,"fontsize-picker",o)},exec:function(e){var t=this;ec.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(e,t,n){var o=p("div"),r="",i=ec.color;i._htmlCache||(e.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){r+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),r+="</div>"}),i._htmlCache=r),v(o,P(i._htmlCache)),$(o,"click","a",function(t){n(S(this,"color")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"color-picker",o)},exec:function(e){var t=this;ec.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=p("div"),o=this;v(n,el("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),$(n,"click",".button",function(e){(t=y(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){es(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){es(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n;return E(t,"li")||E(t,"ul,ol,menu")&&(t=(n=this.getRangeHelper().selectedRange()).startContainer.parentNode,n=n.endContainer.parentNode,t!==t.parentNode.firstElementChild||E(n,"li")&&n!==n.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),h(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return h(t,"ul,ol,menu")?0:-1},exec:function(){h(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var t=this,n=p("div");v(n,el("table",{rows:t._("Rows:"),cols:t._("Cols:"),insert:t._("Insert")},!0)),$(n,"click",".button",function(e){var o=Number(y(n,"#rows")[0].value),r=Number(y(n,"#cols")[0].value),i="<table>";0<o&&0<r&&(i+=Array(o+1).join("<tr>"+Array(r+1).join("<td><br /></td>")+"</tr>"),i+="</table>",t.wysiwygEditorInsertHtml(i),t.closeDropDown(!0),e.preventDefault())}),t.createDropDown(e,"inserttable",n)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{_dropDown:function(e,t,n,o){var r=p("div");v(r,el("image",{url:e._("URL:"),width:e._("Width (optional):"),height:e._("Height (optional):"),insert:e._("Insert")},!0));var i=y(r,"#image")[0];i.value=n,$(r,"click",".button",function(t){i.value&&o(i.value,y(r,"#width")[0].value,y(r,"#height")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertimage",r)},exec:function(e){var t=this;ec.image._dropDown(t,e,"",function(e,n,o){var r="";n&&(r+=' width="'+parseInt(n,10)+'"'),o&&(r+=' height="'+parseInt(o,10)+'"'),r+=' src="'+ei(e)+'"',t.wysiwygEditorInsertHtml("<img"+r+" />")})},tooltip:"Insert an image"},email:{_dropDown:function(e,t,n){var o=p("div");v(o,el("email",{label:e._("E-mail:"),desc:e._("Description (optional):"),insert:e._("Insert")},!0)),$(o,"click",".button",function(t){var r=y(o,"#email")[0].value;r&&n(r,y(o,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertemail",o)},exec:function(e){var t=this;ec.email._dropDown(t,e,function(e,n){!t.getRangeHelper().selectedHtml()||n?t.wysiwygEditorInsertHtml('<a href="mailto:'+ei(e)+'">'+ei(n||e)+"</a>"):t.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(e,t,n){var o=p("div");v(o,el("link",{url:e._("URL:"),desc:e._("Description (optional):"),ins:e._("Insert")},!0));var r=y(o,"#link")[0];function i(t){r.value&&n(r.value,y(o,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}$(o,"click",".button",i),$(o,"keypress",function(e){13===e.which&&r.value&&i(e)},!0),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;ec.link._dropDown(t,e,function(e,n){n||!t.getRangeHelper().selectedHtml()?t.wysiwygEditorInsertHtml('<a href="'+ei(e)+'">'+ei(n||e)+"</a>"):t.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return h(this.currentNode(),"a")?0:-1},exec:function(){var e=h(this.currentNode(),"a");if(e){for(;e.firstChild;)D(e.firstChild,e);g(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",r="</blockquote>";t?(o=o+(n=n?"<cite>"+ei(n)+"</cite>":"")+t+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r="<br />"+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(e){var t=this,n=function(o){var r,i=t.opts,a=i.emoticonsRoot||"",s=i.emoticonsCompat,u=t.getRangeHelper(),d=s&&" "!==u.getOuterText(!0,1)?" ":"",f=s&&" "!==u.getOuterText(!1,1)?" ":"",m=p("div"),h=p("div"),u=l({},i.emoticons.dropdown,o?i.emoticons.more:{});return v(m,h),r=Math.sqrt(Object.keys(u).length),$(m,"click","img",function(e){t.insert(d+_(this,"alt")+f,null,!1).closeDropDown(!0),e.preventDefault()}),c(u,function(e,t){v(h,p("img",{src:a+(t.url||t),alt:e,title:t.tooltip||e})),h.children.length>=r&&(h=p("div"),v(m,h))}),!o&&i.emoticons.more&&(v(i=p("a",{className:"sceditor-more"}),document.createTextNode(t._("More"))),$(i,"click",function(o){t.createDropDown(e,"more-emoticons",n(!0)),o.preventDefault()}),v(m,i)),m};t.createDropDown(e,"emoticons",n(!1))},txtExec:function(e){ec.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var o=p("div");v(o,el("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0)),$(o,"click",".button",function(t){var r=(i=y(o,"#link")[0].value).match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/),i=i.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),a=0;i&&c(i[1].split(/[hms]/),function(e,t){""!==t&&(a=60*a+Number(t))}),r&&/^[a-zA-Z0-9_\-]{11}$/.test(r[1])&&n(r[1],a),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;ec.youtube._dropDown(t,e,function(e,n){t.wysiwygEditorInsertHtml(el("youtube",{id:e,time:n}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1;return n<2e3&&(n=1900+n),o<10&&(o="0"+o),(t=t.getDate())<10&&(t="0"+t),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,o).replace(/day/i,t)},exec:function(){this.insertText(ec.date._date(this))},txtExec:function(){this.insertText(ec.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)+":"+((e=e.getSeconds())<10?"0"+e:e)},exec:function(){this.insertText(ec.time._time())},txtExec:function(){this.insertText(ec.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!E(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!E(t,"body")))&&(e="ltr"===C(t,"direction")?"":"ltr",C(t,"direction",e))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!E(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!E(t,"body")))&&(e="rtl"===C(t,"direction")?"":"rtl",C(t,"direction",e))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize()),this.focus()},txtExec:function(){this.maximize(!this.maximize()),this.focus()},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode(),this.focus()},txtExec:function(){this.toggleSourceMode(),this.focus()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},eu={};function ed(e){function t(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)}function n(n,o){for(var i,a=t((n=[].slice.call(n)).shift()),l=0;l<r.length;l++)if(a in r[l]&&(i=r[l][a].apply(e,n),o))return i}var o=this,r=[];o.call=function(){n(arguments,!1)},o.callOnlyFirst=function(){return n(arguments,!0)},o.hasHandler=function(e){var n=r.length;for(e=t(e);n--;)if(e in r[n])return!0;return!1},o.exists=function(e){return e in eu&&"function"==typeof(e=eu[e])&&"object"==typeof e.prototype},o.isRegistered=function(e){if(o.exists(e)){for(var t=r.length;t--;)if(r[t]instanceof eu[e])return!0}return!1},o.register=function(t){return!(!o.exists(t)||o.isRegistered(t)||(t=new eu[t],r.push(t),"init"in t&&t.init.call(e),0))},o.deregister=function(t){var n,i=r.length,a=!1;if(!o.isRegistered(t))return a;for(;i--;)r[i]instanceof eu[t]&&(a=!0,"destroy"in(n=r.splice(i,1)[0])&&n.destroy.call(e));return a},o.destroy=function(){for(var t=r.length;t--;)"destroy"in r[t]&&r[t].destroy.call(e);r=[],e=null}}ed.plugins=eu;var ef=function(e,t,n){var o,r,i,a,l,s="",c=e.startContainer,u=e.startOffset;for(c&&3!==c.nodeType&&(c=c.childNodes[u],u=0),i=a=u;n>s.length&&c&&3===c.nodeType;)o=c.nodeValue,r=n-s.length,l&&(a=o.length,i=0),l=c,c=t?(u=i=Math.max(a-r,0),s=o.substr(i,a-i)+s,l.previousSibling):(u=i+(a=Math.min(r,o.length)),s+=o.substr(i,a),l.nextSibling);return{node:l||c,offset:u,text:s}};function ep(e,t,n){var o,r,i=t||e.contentDocument||e.document,a="sceditor-start-marker",l="sceditor-end-marker",s=this;s.insertHTML=function(e,t){var o,r;if(!s.selectedRange())return!1;for(t&&(e+=s.selectedHtml()+t),r=p("p",{},i),o=i.createDocumentFragment(),r.innerHTML=n(e);r.firstChild;)v(o,r.firstChild);s.insertNode(o)},r=function(e,t,n){var r,c=i.createDocumentFragment();if("string"==typeof e?(t&&(e+=s.selectedHtml()+t),c=P(e)):(v(c,e),t&&(v(c,s.selectedRange().extractContents()),v(c,t))),r=c.lastChild){for(;!V(r.lastChild,!0);)r=r.lastChild;return(q(r)?r.lastChild||v(r,document.createTextNode("\xe2€‹")):r=c,s.removeMarkers(),v(r,o(a)),v(r,o(l)),n)?(v(n=p("div"),c),n.innerHTML):c}},s.insertNode=function(e,t){var n,o,i=r(e,t),t=(e=s.selectedRange()).commonAncestorContainer,a=[];if(!i)return!1;function l(e){e&&G(e)&&0>a.indexOf(e)&&g(e)}e.startContainer!==e.endContainer&&(c(t.childNodes,function(e,t){G(t)&&a.push(t)}),n=i.firstChild,o=i.lastChild),e.deleteContents(),t&&3!==t.nodeType&&!q(t)?D(i,t):(e.insertNode(i),l(n&&n.previousSibling),l(o&&o.nextSibling)),s.restoreRange()},s.cloneSelected=function(){var e=s.selectedRange();if(e)return e.cloneRange()},s.selectedRange=function(){var t,n,o=e.getSelection();if(o){if(o.rangeCount<=0){for(n=i.body;n.firstChild;)n=n.firstChild;(t=i.createRange()).setStartBefore(n),o.addRange(t)}return 0<o.rangeCount?o.getRangeAt(0):t}},s.hasSelection=function(){var t=e.getSelection();return t&&0<t.rangeCount},s.selectedHtml=function(){var e,t=s.selectedRange();return t?(v(e=p("p",{},i),t.cloneContents()),e.innerHTML):""},s.parentNode=function(){var e=s.selectedRange();if(e)return e.commonAncestorContainer},s.getFirstBlockParent=function(e){var t=function(e){return V(e,!0)?(e=e?e.parentNode:null)&&t(e):e};return t(e||s.parentNode())},s.insertNodeAt=function(e,t){var n=s.selectedRange(),o=s.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),s.selectRange(n)},o=function(e){return s.removeMarker(e),(e=p("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},i)).innerHTML=" ",e},s.insertMarkers=function(){var e=s.selectedRange(),t=o(a);s.removeMarkers(),s.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(o(l),t.nextSibling):s.insertNodeAt(!1,o(l))},s.getMarker=function(e){return i.getElementById(e)},s.removeMarker=function(e){(e=s.getMarker(e))&&g(e)},s.removeMarkers=function(){s.removeMarker(a),s.removeMarker(l)},s.saveRange=function(){s.insertMarkers()},s.selectRange=function(t){var n,o=e.getSelection(),r=t.endContainer;if(t.collapsed&&r&&!V(r,!0)){for(n=r.lastChild;n&&E(n,".sceditor-ignore");)n=n.previousSibling;E(n,"br")&&((r=i.createRange()).setEndAfter(n),r.collapse(!1),s.compare(t,r)&&(t.setStartBefore(n),t.collapse(!0)))}o&&(s.clear(),o.addRange(t))},s.restoreRange=function(){var e,t=s.selectedRange(),n=s.getMarker(a),o=s.getMarker(l);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=i.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),s.selectRange(t),s.removeMarkers()},s.selectOuterText=function(e,t){var n=s.cloneSelected();if(!n)return!1;n.collapse(!1),e=ef(n,!0,e),t=ef(n,!1,t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),s.selectRange(n)},s.getOuterText=function(e,t){var n=s.cloneSelected();return n?(n.collapse(!e),ef(n,e,t).text):""},s.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,c,u,d,f,p,m="(^|[\\sآ \xe2€‚\xe2€ƒ\xe2€‰])",h=e.length,g=r?1:0,o=o||e[h-1][0].length;for(r&&o++,i=i||"",u=(a=s.getOuterText(!0,o)).length,a+=i,t&&(a+=s.getOuterText(!1,o));h--;)if(c=Math.max(0,u-(p=(f=e[h][0]).length)-g),d=-1,r?(l=a.substr(c).match(RegExp(m+er(f)+m)))&&(d=l.index+c+l[1].length):d=a.indexOf(f,c),-1<d&&d<=u&&u<=d+p+g)return d=u-d,s.selectOuterText(d,p-d-(/^\S/.test(i)?1:0)),s.insertHTML(e[h][1]),!0;return!1},s.compare=function(e,t){return t=t||s.selectedRange(),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},s.clear=function(){var t=e.getSelection();t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())}}var em,eh,eg,ev=navigator.userAgent,ey=/iPhone|iPod|iPad| wosbrowser\//i.test(ev),e$=(eh=!!window.document.documentMode,eC="-ms-ime-align"in document.documentElement.style,(eE=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===eE.contentEditable&&(eE=/Opera Mobi|Opera Mini/i.test(ev),/Android/i.test(ev)&&(eE=!0,/Safari/.test(ev)&&(eE=!(em=/Safari\/(\d+)/.exec(ev))||!em[1]||em[1]<534)),/ Silk\//i.test(ev)&&(eE=!(em=/AppleWebKit\/(\d+)/.exec(ev))||!em[1]||em[1]<534),ey&&(eE=/OS [0-4](_\d)+ like Mac/i.test(ev)),/Firefox/i.test(ev)&&(eE=!1),/OneBrowser/i.test(ev)&&(eE=!1),"UCWEB"===navigator.vendor&&(eE=!1),!(eE=!(!eh&&!eC)||eE))),eb=Object.hasOwnProperty,e_=Object.setPrototypeOf,ex=Object.isFrozen,ew=Object.getPrototypeOf,ek=Object.getOwnPropertyDescriptor,eT=Object.freeze,eC=Object.seal,eS=Object.create,eE="undefined"!=typeof Reflect&&Reflect,eD=(eD=eE.apply)||function(e,t,n){return e.apply(t,n)},eT=eT||function(e){return e},eC=eC||function(e){return e},eN=(eN=eE.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))},eM=eL(Array.prototype.forEach),eA=eL(Array.prototype.pop),eR=eL(Array.prototype.push),e8=eL(String.prototype.toLowerCase),eB=eL(String.prototype.match),eF=eL(String.prototype.replace),eH=eL(String.prototype.indexOf),eI=eL(String.prototype.trim),eO=eL(RegExp.prototype.test),ez=(eg=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return eN(eg,t)});function eL(e){return function(t){for(var n=arguments.length,o=Array(1<n?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return eD(e,t,o)}}function e0(e,t){e_&&e_(e,null);for(var n=t.length;n--;){var o,r=t[n];"string"!=typeof r||(o=e8(r))!==r&&(ex(t)||(t[n]=o),r=o),e[r]=!0}return e}function e1(e){var t=eS(null),n=void 0;for(n in e)eD(eb,e,[n])&&(t[n]=e[n]);return t}function eP(e,t){for(;null!==e;){var n=ek(e,t);if(n){if(n.get)return eL(n.get);if("function"==typeof n.value)return eL(n.value)}e=ew(e)}return null}var e7=eT(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),e2=eT(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),eU=eT(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ej=eT(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),eW=eT(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),e6=eT(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),e3=eT(["#text"]),eq=eT(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),eV=eT(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),e4=eT(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),e5=eT(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),e9=eC(/\{\{[\s\S]*|[\s\S]*\}\}/gm),eG=eC(/<%[\s\S]*|[\s\S]*%>/gm),eY=eC(/^data-[\-\w.\u00B7-\uFFFF]/),eK=eC(/^aria-[\-\w]+$/),eX=eC(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eQ=eC(/^(?:\w+script|data):/i),eZ=eC(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function te(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var tt=function e(t){function n(t){return e(t)}var o=0<arguments.length&&void 0!==t?t:"undefined"==typeof window?null:window;if(n.version="2.2.6",n.removed=[],!o||!o.document||9!==o.document.nodeType)return n.isSupported=!1,n;var r=o.document,i=o.document,a=o.DocumentFragment,l=o.HTMLTemplateElement,s=o.Node,c=o.Element,u=o.NodeFilter,d=o.NamedNodeMap,f=void 0===d?o.NamedNodeMap||o.MozNamedAttrMap:d,p=o.Text,m=o.Comment,h=o.DOMParser,t=o.trustedTypes,g=eP(d=c.prototype,"cloneNode"),v=eP(d,"nextSibling"),y=eP(d,"childNodes"),$=eP(d,"parentNode");"function"!=typeof l||(l=i.createElement("template")).content&&l.content.ownerDocument&&(i=l.content.ownerDocument);var b=function(e,t){if("object"!==(void 0===e?"undefined":eJ(e))||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix",r="dompurify"+((n=t.currentScript&&t.currentScript.hasAttribute(o)?t.currentScript.getAttribute(o):n)?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(i){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(t,r),_=b&&et?b.createHTML(""):"",x=i.implementation,w=i.createNodeIterator,k=i.getElementsByTagName,T=i.createDocumentFragment,C=r.importNode,S={};try{S=e1(i).documentMode?i.documentMode:{}}catch(E){}var D={};function N(e){eu&&eu===e||(z="ALLOWED_TAGS"in(e=e1(e=e&&"object"===(void 0===e?"undefined":eJ(e))?e:{}))?e0({},e.ALLOWED_TAGS):L,P="ALLOWED_ATTR"in e?e0({},e.ALLOWED_ATTR):U,es="ADD_URI_SAFE_ATTR"in e?e0(e1(ec),e.ADD_URI_SAFE_ATTR):ec,ea="ADD_DATA_URI_TAGS"in e?e0(e1(el),e.ADD_DATA_URI_TAGS):el,j="FORBID_TAGS"in e?e0({},e.FORBID_TAGS):{},W="FORBID_ATTR"in e?e0({},e.FORBID_ATTR):{},M="USE_PROFILES"in e&&e.USE_PROFILES,q=!1!==e.ALLOW_ARIA_ATTR,V=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=e.SAFE_FOR_TEMPLATES||!1,K=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,J=e.RETURN_DOM_FRAGMENT||!1,ee=!1!==e.RETURN_DOM_IMPORT,et=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,en=!1!==e.SANITIZE_DOM,eo=!1!==e.KEEP_CONTENT,er=e.IN_PLACE||!1,O=e.ALLOWED_URI_REGEXP||O,Y&&(V=!1),J&&(Z=!0),M&&(z=e0({},[].concat(te(e3))),P=[],!0===M.html&&(e0(z,e7),e0(P,eq)),!0===M.svg&&(e0(z,e2),e0(P,eV),e0(P,e5)),!0===M.svgFilters&&(e0(z,eU),e0(P,eV),e0(P,e5)),!0===M.mathMl&&(e0(z,eW),e0(P,e4),e0(P,e5))),e.ADD_TAGS&&e0(z=z===L?e1(z):z,e.ADD_TAGS),e.ADD_ATTR&&e0(P=P===U?e1(P):P,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&e0(es,e.ADD_URI_SAFE_ATTR),eo&&(z["#text"]=!0),K&&e0(z,["html","head","body"]),z.table&&(e0(z,["tbody"]),delete j.tbody),eT&&eT(e),eu=e)}n.isSupported=x&&void 0!==x.createHTMLDocument&&9!==S;var M,A=e9,R=eG,B=eY,F=eK,H=eQ,I=eZ,O=eX,z=null,L=e0({},[].concat(te(e7),te(e2),te(eU),te(eW),te(e3))),P=null,U=e0({},[].concat(te(eq),te(eV),te(e4),te(e5))),j=null,W=null,q=!0,V=!0,G=!1,Y=!1,K=!1,X=!1,Q=!1,Z=!1,J=!1,ee=!0,et=!1,en=!0,eo=!0,er=!1,ei=e0({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ea=null,el=e0({},["audio","video","img","source","image","track"]),es=null,ec=e0({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),eu=null,ed=i.createElement("form"),ef=e0({},["mi","mo","mn","ms","mtext"]),ep=e0({},["foreignobject","desc","title","annotation-xml"]),em=e0({},e2);e0(em,eU),e0(em,ej);var eh=e0({},eW);function eg(e){eR(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=_}catch(o){e.remove()}}}function ev(e,t){try{eR(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(o){eR(n.removed,{attribute:null,from:t})}t.removeAttribute(e)}function ey(e){var t=void 0,n=void 0;Q?e="<remove></remove>"+e:n=(o=eB(e,/^[\r\n\t ]+/))&&o[0];var o,r=b?b.createHTML(e):e;try{t=(new h).parseFromString(r,"text/html")}catch(a){}return t&&t.documentElement||((o=(t=x.createHTMLDocument("")).body).parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=r),e&&n&&t.body.insertBefore(i.createTextNode(n),t.body.childNodes[0]||null),k.call(t,K?"html":"body")[0]}function e$(e){return w.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,function(){return u.FILTER_ACCEPT},!1)}function eb(e){return"object"===(void 0===s?"undefined":eJ(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":eJ(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function e_(e,t,o){D[e]&&eM(D[e],function(e){e.call(n,t,o,eu)})}function ex(e){if(e_("beforeSanitizeElements",e,null),!((l=e)instanceof p||l instanceof m||"string"==typeof l.nodeName&&"string"==typeof l.textContent&&"function"==typeof l.removeChild&&l.attributes instanceof f&&"function"==typeof l.removeAttribute&&"function"==typeof l.setAttribute&&"string"==typeof l.namespaceURI&&"function"==typeof l.insertBefore)||eB(e.nodeName,/[\u0080-\uFFFF]/))return eg(e),1;var t,o,r,i,a,l=e8(e.nodeName);if(e_("uponSanitizeElement",e,{tagName:l,allowedTags:z}),!eb(e.firstElementChild)&&(!eb(e.content)||!eb(e.content.firstElementChild))&&eO(/<[/\w]/g,e.innerHTML)&&eO(/<[/\w]/g,e.textContent))return eg(e),1;if(z[l]&&!j[l])return e instanceof c&&(t=e,(o=$(t))&&o.tagName||(o={namespaceURI:eE,tagName:"template"}),r=e8(t.tagName),i=e8(o.tagName),t.namespaceURI===eS?o.namespaceURI===eE?"svg"!==r:o.namespaceURI===eC?"svg"!==r||"annotation-xml"!==i&&!ef[i]:!Boolean(em[r]):t.namespaceURI===eC?o.namespaceURI===eE?"math"!==r:o.namespaceURI===eS?"math"!==r||!ep[i]:!Boolean(eh[r]):t.namespaceURI!==eE||o.namespaceURI===eS&&!ep[i]||o.namespaceURI===eC&&!ef[i]||(i=e0({},["title","style","font","a","script"]),!!eh[r]||!i[r]&&!!em[r]))||("noscript"===l||"noembed"===l)&&eO(/<\/no(script|embed)/i,e.innerHTML)?(eg(e),1):(Y&&3===e.nodeType&&(a=eF(a=e.textContent,A," "),a=eF(a,R," "),e.textContent!==a&&(eR(n.removed,{element:e.cloneNode()}),e.textContent=a)),e_("afterSanitizeElements",e,null),0);if(eo&&!ei[l])for(var s=$(e),u=y(e),d=u.length-1;0<=d;--d)s.insertBefore(g(u[d],!0),v(e));return eg(e),1}function ew(e,t,n){return!(en&&("id"===t||"name"===t)&&(n in i||n in ed)||!(V&&eO(B,t)||q&&eO(F,t))&&(!P[t]||W[t]||!es[t]&&!eO(O,eF(n,I,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==eH(n,"data:")||!ea[e])&&(!G||eO(H,eF(n,I,"")))&&n))}function ek(e){var t,o=void 0,r=void 0;e_("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){for(var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P},r=i.length;r--;){var l=(t=i[r]).name,s=t.namespaceURI,o=eI(t.value),c=e8(l);if(a.attrName=c,a.attrValue=o,a.keepAttr=!0,a.forceKeepAttr=void 0,e_("uponSanitizeAttribute",e,a),o=a.attrValue,!a.forceKeepAttr&&(ev(l,e),a.keepAttr)){if(eO(/\/>/i,o))ev(l,e);else if(Y&&(o=eF(o,A," "),o=eF(o,R," ")),ew(e.nodeName.toLowerCase(),c,o))try{s?e.setAttributeNS(s,l,o):e.setAttribute(l,o),eA(n.removed)}catch(u){}}}e_("afterSanitizeAttributes",e,null)}}e0(eh,e6);var eC="http://www.w3.org/1998/Math/MathML",eS="http://www.w3.org/2000/svg",eE="http://www.w3.org/1999/xhtml";return n.sanitize=function(e,t){var i,l=void 0,c=void 0,u=void 0;if("string"!=typeof(e=e||"<!-->")&&!eb(e)){if("function"!=typeof e.toString)throw ez("toString is not a function");if("string"!=typeof(e=e.toString()))throw ez("dirty is not a string, aborting")}if(!n.isSupported){if("object"===eJ(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof e)return o.toStaticHTML(e);if(eb(e))return o.toStaticHTML(e.outerHTML)}return e}if(X||N(t),n.removed=[],!(er="string"!=typeof e&&er)){if(e instanceof s)1===(t=(l=ey("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?l=t:l.appendChild(t);else{if(!Z&&!Y&&!K&&-1===e.indexOf("<"))return b&&et?b.createHTML(e):e;if(!(l=ey(e)))return Z?null:_}}l&&Q&&eg(l.firstChild);for(var d=e$(er?e:l);i=d.nextNode();)3===i.nodeType&&i===c||ex(i)||(i.content instanceof a&&function e(t){var n,o=e$(t);for(e_("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)e_("uponSanitizeShadowNode",n,null),ex(n)||(n.content instanceof a&&e(n.content),ek(n));e_("afterSanitizeShadowDOM",t,null)}(i.content),ek(i),c=i);if(c=null,er)return e;if(Z){if(J)for(u=T.call(l.ownerDocument);l.firstChild;)u.appendChild(l.firstChild);else u=l;return ee?C.call(r,u,!0):u}return e=K?l.outerHTML:l.innerHTML,Y&&(e=eF(e,A," "),e=eF(e,R," ")),b&&et?b.createHTML(e):e},n.setConfig=function(e){N(e),X=!0},n.clearConfig=function(){eu=null,X=!1},n.isValidAttribute=function(e,t,n){return eu||N({}),ew(e=e8(e),t=e8(t),n)},n.addHook=function(e,t){"function"==typeof t&&(D[e]=D[e]||[],eR(D[e],t))},n.removeHook=function(e){D[e]&&eA(D[e])},n.removeHooks=function(e){D[e]&&(D[e]=[])},n.removeAllHooks=function(){D={}},n}(),tn=window,to=document,tr=/^image\/(p?jpe?g|gif|png|bmp)$/i;function ti(e,t){var i,a,u,f,N,W,G,K,Q,J,eo,ea,es,eu,ef,em,eh,eg,ev,eb,e_,ex,ew,ek,eT,eC,eS,eE,eD,eN,eM,eA,eR,e8,eB,eF,eH,eI,eO,ez,eL,e0,e1,eP,e7,e2,eU,ej,eW,e6,e3,eq,eV,e4,e5,e9,eG,eY,eK,eX,eQ=this,eZ={},eJ=[],te=[],ta={},tl={},ts={};eQ.commands=l(!0,{},t.commands||ec);var tc=eQ.opts=l(!0,{},en,t);eQ.opts.emoticons=t.emoticons||en.emoticons,Array.isArray(tc.allowedIframeUrls)||(tc.allowedIframeUrls=[]),tc.allowedIframeUrls.push("https://www.youtube-nocookie.com/embed/");var tu=tt();function td(e){return tu.sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["allowfullscreen","frameborder","target"]})}tu.addHook("uponSanitizeElement",function(e,t){var o=tc.allowedIframeUrls;if("iframe"===t.tagName){for(var r=_(e,"src")||"",i=0;i<o.length;i++){var a=o[i];if(n(a)&&r.substr(0,a.length)===a||a.test&&a.test(r))return}g(e)}}),tu.addHook("afterSanitizeAttributes",function(e){"target"in e&&_(e,"data-sce-target",_(e,"target")),x(e,"target")}),t=function(){e._sceditor=eQ,tc.locale&&"en"!==tc.locale&&eD(),D(a=p("div",{className:"sceditor-container"}),e),C(a,"z-index",tc.zIndex),ev=e.required,e.required=!1;var t=ti.formats[tc.format];i=t?new t:{},eu=new ed(eQ),(tc.plugins||"").split(",").forEach(function(e){eu.register(e.trim())}),"init"in i&&i.init.call(eQ),e8(),eN(),eE(),eM(),eA(),e$||eQ.toggleSourceMode(),eU();var n=function(){b(tn,"load",n),tc.autofocus&&eq(!!tc.autofocusEnd),eX(),eW(),eu.call("ready"),"onReady"in i&&i.onReady.call(eQ)};$(tn,"load",n),"complete"===to.readyState&&n()},eD=function(){var e;(ea=ti.locale[tc.locale])||(e=tc.locale.split("-"),ea=ti.locale[e[0]]),ea&&ea.dateFormat&&(tc.dateFormat=ea.dateFormat)},eE=function(){K=p("textarea"),f=p("iframe",{frameborder:0,allowfullscreen:!0}),tc.startInSourceMode?(A(a,"sourceMode"),w(f)):(A(a,"wysiwygMode"),w(K)),tc.spellcheck||_(a,"spellcheck","false"),"https:"===tn.location.protocol&&_(f,"src","about:blank"),v(a,f),v(a,K),eQ.dimensions(tc.width||F(e),tc.height||H(e));var t=ey?" ios":"";(G=f.contentDocument).open(),G.write(el("html",{attrs:' class="'+t+'"',spellcheck:tc.spellcheck?"":'spellcheck="false"',charset:tc.charset,style:tc.style})),G.close(),W=G.body,N=f.contentWindow,eQ.readOnly(!!tc.readOnly),ey&&(H(W,"100%"),$(W,"touchend",eQ.focus)),t=_(e,"tabindex"),_(K,"tabindex",t),_(f,"tabindex",t),es=new ep(N,null,td),w(e),eQ.val(e.value),(t=tc.placeholder||_(e,"placeholder"))&&(K.placeholder=t,_(W,"placeholder",t))},eM=function(){tc.autoUpdate&&($(W,"blur",eK),$(K,"blur",eK)),null===tc.rtl&&(tc.rtl="rtl"===C(K,"direction")),eQ.rtl(!!tc.rtl),tc.autoExpand&&($(W,"load",eX,!0),$(W,"input keyup",eX)),tc.resizeEnabled&&eR(),_(a,"id",tc.id),eQ.emoticons(tc.emoticonsEnabled)},eA=function(){var t=e.form,n="compositionstart compositionend",o="keydown keyup keypress focus blur contextmenu input",r="onselectionchange"in G?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";$(to,"click",e7),t&&($(t,"reset",eL),$(t,"submit",eQ.updateOriginal,!0)),$(window,"pagehide",eQ.updateOriginal),$(window,"pageshow",eL),$(W,"keypress",ez),$(W,"keydown",eI),$(W,"keydown",eO),$(W,"keyup",eW),$(W,"blur",eG),$(W,"keyup",eY),$(W,"paste",eB),$(W,"cut copy",eF),$(W,n,e1),$(W,r,e6),$(W,o,eP),tc.emoticonsCompat&&tn.getSelection&&$(W,"keyup",e4),$(W,"blur",function(){eQ.val()||A(W,"placeholder")}),$(W,"focus",function(){R(W,"placeholder")}),$(K,"blur",eG),$(K,"keyup",eY),$(K,"keydown",eI),$(K,n,e1),$(K,o,eP),$(G,"mousedown",e0),$(G,r,e6),$(G,"keyup",eW),$(a,"selectionchanged",e3),$(a,"selectionchanged",eU),$(a,"selectionchanged valuechanged nodechanged pasteraw paste",eP)},eN=function(){var e,t=eQ.commands,o=(tc.toolbarExclude||"").split(","),r=tc.toolbar.split("|");u=p("div",{className:"sceditor-toolbar",unselectable:"on"}),tc.icons in ti.icons&&(eT=new ti.icons[tc.icons]),c(r,function(r,i){e=p("div",{className:"sceditor-group"}),c(i.split(","),function(r,i){var a,l,s=t[i];!s||-1<o.indexOf(i)||(a=s.shortcut,l=el("toolbarButton",{name:i,dispName:eQ._(s.name||s.tooltip||i)},!0).firstChild,eT&&eT.create&&eT.create(i)&&(D(eT.create(i),l.firstChild),A(l,"has-icon")),l._sceTxtMode=!!s.txtExec,l._sceWysiwygMode=!!s.exec,B(l,"disabled",!s.exec),$(l,"click",function(e){M(l,"disabled")||eS(l,s),eU(),e.preventDefault()}),$(l,"mousedown",function(e){eQ.closeDropDown(),e.preventDefault()}),s.tooltip&&_(l,"title",eQ._(s.tooltip)+(a?" ("+a+")":"")),a&&eQ.addShortcut(a,i),s.state?te.push({name:i,state:s.state}):n(s.exec)&&te.push({name:i,state:s.exec}),v(e,l),tl[i]=l)}),e.firstChild&&v(u,e)}),v(tc.toolbarContainer||a,u)},eR=function(){function e(e){var n=d+((t="touchmove"===e.type?(c=(e=tn.event).changedTouches[0].pageX,e.changedTouches[0].pageY):(c=e.pageX,e.pageY))-s),o=g?u-(c-l):u+(c-l);0<T&&T<o&&(o=T),0<x&&o<x&&(o=x),tc.resizeWidth||(o=!1),0<_&&_<n&&(n=_),0<y&&n<y&&(n=y),tc.resizeHeight||(n=!1),(o||n)&&eQ.dimensions(o,n),e.preventDefault()}var t,n=p("div",{className:"sceditor-grip"}),o=p("div",{className:"sceditor-resize-cover"}),r="touchmove mousemove",i="touchcancel touchend mouseup",l=0,s=0,c=0,u=0,d=0,f=F(a),m=H(a),h=!1,g=eQ.rtl(),y=tc.resizeMinHeight||m/1.5,_=tc.resizeMaxHeight||2.5*m,x=tc.resizeMinWidth||f/1.25,T=tc.resizeMaxWidth||1.25*f,C=function(t){h&&(h=!1,w(o),R(a,"resizing"),b(to,r,e),b(to,i,C),t.preventDefault())};eT&&eT.create&&(f=eT.create("grip"))&&(v(n,f),A(n,"has-icon")),v(a,n),v(a,o),w(o),$(n,"touchstart mousedown",function(t){s="touchstart"===t.type?(l=(t=tn.event).touches[0].pageX,t.touches[0].pageY):(l=t.pageX,t.pageY),u=F(a),d=H(a),h=!0,A(a,"resizing"),k(o),$(to,r,e),$(to,i,C),t.preventDefault()})},e8=function(){var e=tc.emoticons,t=tc.emoticonsRoot||"";c(ts=e?l({},e.more,e.dropdown,e.hidden):ts,function(e,n){ts[e]=el("emoticon",{key:e,url:t+(n.url||n),tooltip:n.tooltip||e}),tc.emoticonsEnabled&&eJ.push(p("img",{src:t+(n.url||n)}))})},eq=function(e){var t,n=W.firstChild;if(O(a)){if(eQ.sourceMode())return t=e?K.value.length:0,void K.setSelectionRange(t,t);if(X(W),e)for((n=W.lastChild)||(n=p("p",{},G),v(W,n));n.lastChild;)E(n=n.lastChild,"br")&&n.previousSibling&&(n=n.previousSibling);t=G.createRange(),q(n)?t.selectNodeContents(n):(t.setStartBefore(n),e&&t.setStartAfter(n)),t.collapse(!e),es.selectRange(t),eh=t,e&&(W.scrollTop=W.scrollHeight),eQ.focus()}},eQ.readOnly=function(e){return"boolean"!=typeof e?!K.readonly:(W.contentEditable=!e,K.readonly=!e,e2(e),eQ)},eQ.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===_(K,"dir"):(_(W,"dir",t),_(K,"dir",t),R(a,"rtl"),R(a,"ltr"),A(a,t),eT&&eT.rtl&&eT.rtl(e),eQ)},e2=function(e){var t=eQ.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";c(tl,function(n,o){B(o,"disabled",e||!o[t])})},eQ.width=function(e,t){return e||0===e?(eQ.dimensions(e,null,t),eQ):F(a)},eQ.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:eQ.width(),height:eQ.height()}:(!1!==e&&(!1!==n&&(tc.width=e),F(a,e)),!1!==t&&(!1!==n&&(tc.height=t),H(a,t)),eQ)},eQ.height=function(e,t){return e||0===e?(eQ.dimensions(null,e,t),eQ):H(a)},eQ.maximize=function(e){var t="sceditor-maximize";return o(e)?M(a,t):((e=!!e)&&(ew=tn.pageYOffset),B(to.documentElement,t,e),B(to.body,t,e),B(a,t,e),eQ.width(e?"100%":tc.width,!1),eQ.height(e?"100%":tc.height,!1),e||tn.scrollTo(0,ew),eX(),eQ)},eX=function(){tc.autoExpand&&!ex&&(ex=setTimeout(eQ.expandToContent,200))},eQ.expandToContent=function(t){var n,o;eQ.maximize()||(clearTimeout(ex),ex=!1,e_||(e_={min:n=tc.resizeMinHeight||tc.height||H(e),max:tc.resizeMaxHeight||2*n}),(o=to.createRange()).selectNodeContents(W),n=o.getBoundingClientRect(),o=G.documentElement.clientHeight-1,n=n.bottom-n.top,o=eQ.height()+1+(n-o),t||-1===e_.max||(o=Math.min(o,e_.max)),eQ.height(Math.ceil(Math.max(o,e_.min))))},eQ.destroy=function(){var t;eu&&(eu.destroy(),eu=es=null,Q&&g(Q),b(to,"click",e7),(t=e.form)&&(b(t,"reset",eL),b(t,"submit",eQ.updateOriginal,!0)),b(window,"pagehide",eQ.updateOriginal),b(window,"pageshow",eL),g(K),g(u),g(a),delete e._sceditor,k(e),e.required=ev)},eQ.createDropDown=function(e,t,n){t="sceditor-"+t,eQ.closeDropDown(),Q&&M(Q,t)||(e=l({top:e.offsetTop,left:e.offsetLeft,marginTop:e.clientHeight},tc.dropDownCss),C(Q=p("div",{className:"sceditor-dropdown "+t}),e),v(Q,n),v(a,Q),$(Q,"click focusin",function(e){e.stopPropagation()}),!Q||(n=y(Q,"input,textarea")[0])&&n.focus())},e7=function(e){3!==e.which&&Q&&!e.defaultPrevented&&(eK(),eQ.closeDropDown())},eF=function(e){var t=es.selectedRange();if(t){for(var n,o,r=p("div",{},G),i=t.commonAncestorContainer;i&&V(i,!0);)1===i.nodeType&&(o=i.cloneNode(),r.firstChild&&v(o,r.firstChild),v(r,o),n=n||o),i=i.parentNode;v(n||r,t.cloneContents()),X(r),e.clipboardData.setData("text/html",r.innerHTML),c(y(r,"p"),function(e,t){j(t,"div")}),c(y(r,"br"),function(e,t){t.nextSibling&&V(t.nextSibling,!0)||g(t)}),v(W,r),e.clipboardData.setData("text/plain",r.innerText),g(r),"cut"===e.type&&t.deleteContents(),e.preventDefault()}},eB=function(e){var t,n,o=W,r=e.clipboardData;if(r){var i={},a=r.types,l=r.items;e.preventDefault();for(var s=0;s<a.length;s++){if(0>a.indexOf("text/html")&&tn.FileReader&&l&&tr.test(l[s].type))return t=r.items[s].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){eH({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);i[a[s]]=r.getData(a[s])}i.text=i["text/plain"],i.html=td(i["text/html"]),eH(i)}else if(!ek){var c=o.scrollTop;for(es.saveRange(),ek=to.createDocumentFragment();o.firstChild;)v(ek,o.firstChild);setTimeout(function(){var e=o.innerHTML;o.innerHTML="",v(o,ek),o.scrollTop=c,ek=!1,es.restoreRange(),eH({html:td(e)})},0)}},eH=function(e){var t=p("div",{},G);eu.call("pasteRaw",e),I(a,"pasteraw",e),e.html?(t.innerHTML=td(e.html),Y(t)):t.innerHTML=ei(e.text||""),e={val:t.innerHTML},"fragmentToSource"in i&&(e.val=i.fragmentToSource(e.val,G,ef)),eu.call("paste",e),I(a,"paste",e),"fragmentToHtml"in i&&(e.val=i.fragmentToHtml(e.val,ef)),eu.call("pasteHtml",e),t=es.getFirstBlockParent(),eQ.wysiwygEditorInsertHtml(e.val,null,!0),function e(t){if(1===t.nodeType){for(var n=t.parentNode,o=t.tagName,r=t.childNodes.length;r--;)e(t.childNodes[r]);if(V(t)){for(r=t.style.length;r--;){var i=t.style[r];C(n,i)===C(t,i)&&t.style.removeProperty(i)}if(!t.style.length){if(x(t,"style"),"FONT"===o&&(C(t,"fontFamily").toLowerCase()===C(n,"fontFamily").toLowerCase()&&x(t,"face"),C(t,"color")===C(n,"color")&&x(t,"color"),C(t,"fontSize")===C(n,"fontSize")&&x(t,"size")),!t.attributes.length&&/SPAN|FONT/.test(o))et(t);else if(/B|STRONG|EM|SPAN|FONT/.test(o))for(var a=/B|STRONG/.test(o),l="EM"===o;n&&V(n)&&(!a||/bold|700/i.test(C(n,"fontWeight")))&&(!l||"italic"===C(n,"fontStyle"));){if((n.tagName===o||a&&/B|STRONG/.test(n.tagName))&&ee(n,t)){et(t);break}n=n.parentNode}}var s=t.nextSibling;s&&s.tagName===o&&ee(s,t)&&(v(t,s),et(s))}}}(t)},eQ.closeDropDown=function(e){Q&&(g(Q),Q=null),!0===e&&eQ.focus()},eQ.wysiwygEditorInsertHtml=function(e,t,n){var o=H(f);eQ.focus(),!n&&h(em,"code")||(es.insertHTML(e,t),es.saveRange(),eC(),Y(W),k(n=y(W,"#sceditor-end-marker")[0]),e=W.scrollTop,t=Z(n).top+1.5*n.offsetHeight-o,w(n),(e<t||t+o<e)&&(W.scrollTop=t),e9(!1),es.restoreRange(),eW())},eQ.wysiwygEditorInsertText=function(e,t){eQ.wysiwygEditorInsertHtml(ei(e),ei(t))},eQ.insertText=function(e,t){return eQ.inSourceMode()?eQ.sourceEditorInsertText(e,t):eQ.wysiwygEditorInsertText(e,t),eQ},eQ.sourceEditorInsertText=function(e,t){var n,o=K.selectionStart,r=K.selectionEnd,i=K.scrollTop;K.focus(),n=K.value,t&&(e+=n.substring(o,r)+t),K.value=n.substring(0,o)+e+n.substring(r,n.length),K.selectionStart=o+e.length-(t?t.length:0),K.selectionEnd=K.selectionStart,K.scrollTop=i,K.focus(),e9()},eQ.getRangeHelper=function(){return es},eQ.sourceEditorCaret=function(e){return K.focus(),e?(K.selectionStart=e.start,K.selectionEnd=e.end,this):{start:K.selectionStart,end:K.selectionEnd}},eQ.val=function(e,t){return n(e)?(eQ.inSourceMode()?eQ.setSourceEditorValue(e):(!1!==t&&"toHtml"in i&&(e=i.toHtml(e)),eQ.setWysiwygEditorValue(e)),eQ):eQ.inSourceMode()?eQ.getSourceEditorValue(!1):eQ.getWysiwygEditorValue(t)},eQ.insert=function(e,t,n,o,r){var a;return eQ.inSourceMode()?eQ.sourceEditorInsertText(e,t):(t&&(a=es.selectedHtml(),e+=(a=!1!==n&&"fragmentToSource"in i?i.fragmentToSource(a,G,ef):a)+t),!1!==n&&"fragmentToHtml"in i&&(e=i.fragmentToHtml(e,ef)),!1!==n&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),eQ.wysiwygEditorInsertHtml(e)),eQ},eQ.getWysiwygEditorValue=function(e){for(var t,n=p("div",{},G),o=W.childNodes,r=0;r<o.length;r++)v(n,o[r].cloneNode(!0));return v(W,n),Y(n),g(n),t=n.innerHTML,!1!==e&&i.hasOwnProperty("toSource")?i.toSource(t,G):t},eQ.getBody=function(){return W},eQ.getContentAreaContainer=function(){return f},eQ.getSourceEditorValue=function(e){var t=K.value;return!1!==e&&"toHtml"in i?i.toHtml(t):t},eQ.setWysiwygEditorValue=function(e){e=e||"<p><br /></p>",W.innerHTML=td(e),eC(),eW(),e9(),eX()},eQ.setSourceEditorValue=function(e){K.value=e,e9()},eQ.updateOriginal=function(){e.value=eQ.val()},eC=function(){var e,t,n,o,r,i,a;tc.emoticonsEnabled&&(e=W,t=ts,n=tc.emoticonsCompat,o=e.ownerDocument,r="(^|\\s|آ |\xe2€‚|\xe2€ƒ|\xe2€‰|$)",i=[],a={},m(e,"code")||(c(t,function(e){a[e]=RegExp(r+er(e)+r),i.push(e)}),i.sort(function(e,t){return t.length-e.length}),function e(r){for(r=r.firstChild;r;){if(1!==r.nodeType||E(r,"code")||e(r),r.nodeType===d)for(var l=0;l<i.length;l++){var s,c=r.nodeValue,u=i[l],f=n?c.search(a[u]):c.indexOf(u);-1<f&&(s=c.indexOf(u,f),f=P(t[u],o),u=c.substr(s+u.length),f.appendChild(o.createTextNode(u)),r.nodeValue=c.substr(0,s),r.parentNode.insertBefore(f,r.nextSibling))}r=r.nextSibling}}(e)))},eQ.inSourceMode=function(){return M(a,"sourceMode")},eQ.sourceMode=function(e){var t=eQ.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&eQ.toggleSourceMode(),eQ)},eQ.toggleSourceMode=function(){var e=eQ.inSourceMode();!e$&&e||(e||(es.saveRange(),es.clear()),eh=null,eQ.blur(),e?eQ.setWysiwygEditorValue(eQ.getSourceEditorValue()):eQ.setSourceEditorValue(eQ.getWysiwygEditorValue()),T(K),T(f),B(a,"wysiwygMode",e),B(a,"sourceMode",!e),e2(),eU())},ej=function(){return K.focus(),K.value.substring(K.selectionStart,K.selectionEnd)},eS=function(e,t){eQ.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?eQ.sourceEditorInsertText.apply(eQ,t.txtExec):t.txtExec.call(eQ,e,ej())):t.exec&&(r(t.exec)?t.exec.call(eQ,e):eQ.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},eQ.execCommand=function(e,t){var n=!1,o=eQ.commands[e];if(eQ.focus(),!h(es.parentNode(),"code")){try{n=G.execCommand(e,!1,t)}catch(r){}!n&&o&&o.errorMessage&&alert(eQ._(o.errorMessage)),eU()}},e6=function(){function e(){if(N.getSelection()&&N.getSelection().rangeCount<=0)eh=null;else if(es&&!es.compare(eh)){if((eh=es.cloneSelected())&&eh.collapsed){var e,t,n=eh.startContainer,o=eh.startOffset;for(o&&n.nodeType!==d&&(n=n.childNodes[o]);n&&n.parentNode!==W;)n=n.parentNode;n&&V(n,!0)&&(es.saveRange(),e=G,z(W,function(n){V(n,!0)?(t||n.nodeType===d?/\S/.test(n.nodeValue):!E(n,".sceditor-ignore"))&&(t||D(t=p("p",{},e),n),v(t,n)):t=null},!1,!0),es.restoreRange())}I(a,"selectionchanged")}eg=!1}eg||(eg=!0,"onselectionchange"in G?e():setTimeout(e,100))},e3=function(){var e,t=es.parentNode();ef!==t&&(e=ef,ef=t,em=es.getFirstBlockParent(t),I(a,"nodechanged",{oldNode:e,newNode:ef}))},eQ.currentNode=function(){return ef},eQ.currentBlockNode=function(){return em},eU=function(){var e,t,o="active",r=G,i=eQ.sourceMode();if(eQ.readOnly())c(y(u,o),function(e,t){R(t,o)});else{i||(t=es.parentNode(),e=es.getFirstBlockParent(t));for(var a=0;a<te.length;a++){var l=0,s=tl[te[a].name],d=te[a].state,f=i&&!s._sceTxtMode||!i&&!s._sceWysiwygMode;if(n(d)){if(!i)try{-1<(l=r.queryCommandEnabled(d)?0:-1)&&(l=r.queryCommandState(d)?1:0)}catch(p){}}else f||(l=d.call(eQ,t,e));B(s,"disabled",f||l<0),B(s,o,0<l)}eT&&eT.update&&eT.update(i,t,e)}},ez=function(e){var t,n,o;e.defaultPrevented||(eQ.closeDropDown(),13!==e.which||!E(em,"li,ul,ol")&&U(em)&&(t=p("br",{},G),es.insertNode(t),(o=(n=t.parentNode).lastChild)&&o.nodeType===d&&""===o.nodeValue&&(g(o),o=n.lastChild),!V(n,!0)&&o===t&&V(t.previousSibling)&&es.insertHTML("<br>"),e.preventDefault()))},eW=function(){L(W,function(e){if(1===e.nodeType&&!/inline/.test(C(e,"display"))&&!E(e,".sceditor-nlf")&&U(e)){var t=p("p",{},G);return t.className="sceditor-nlf",t.innerHTML="<br />",v(W,t),!1}if(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||E(e,"br"))return!1})},eL=function(){eQ.val(e.value)},e0=function(){eQ.closeDropDown()},eQ._=function(){var e=arguments;return ea&&ea[e[0]]&&(e[0]=ea[e[0]]),e[0].replace(/\{(\d+)\}/g,function(t,n){return void 0!==e[+n+1]?e[+n+1]:"{"+n+"}"})},eP=function(e){eu&&eu.call(e.type+"Event",e,eQ);var t=(e.target===K?"scesrc":"scewys")+e.type;eZ[t]&&eZ[t].forEach(function(t){t.call(eQ,e)})},eQ.bind=function(e,t,n,o){for(var i,a,l=(e=e.split(" ")).length;l--;)r(t)&&(i="scewys"+e[l],a="scesrc"+e[l],n||(eZ[i]=eZ[i]||[],eZ[i].push(t)),o||(eZ[a]=eZ[a]||[],eZ[a].push(t)),"valuechanged"===e[l]&&(e9.hasHandler=!0));return eQ},eQ.unbind=function(e,t,n,o){for(var i=(e=e.split(" ")).length;i--;)r(t)&&(n||s(eZ["scewys"+e[i]]||[],t),o||s(eZ["scesrc"+e[i]]||[],t));return eQ},eQ.blur=function(e,t,n){return r(e)?eQ.bind("blur",e,t,n):(eQ.sourceMode()?K:W).blur(),eQ},eQ.focus=function(e,t,n){if(r(e))eQ.bind("focus",e,t,n);else if(eQ.inSourceMode())K.focus();else{if(y(G,":focus").length)return;var o,n=es.selectedRange();eh||eq(!0),n&&1===n.endOffset&&n.collapsed&&(o=n.endContainer)&&1===o.childNodes.length&&E(o.firstChild,"br")&&(n.setStartBefore(o.firstChild),n.collapse(!0),es.selectRange(n)),N.focus(),W.focus()}return eU(),eQ},eQ.keyDown=function(e,t,n){return eQ.bind("keydown",e,t,n)},eQ.keyPress=function(e,t,n){return eQ.bind("keypress",e,t,n)},eQ.keyUp=function(e,t,n){return eQ.bind("keyup",e,t,n)},eQ.nodeChanged=function(e){return eQ.bind("nodechanged",e,!1,!0)},eQ.selectionChanged=function(e){return eQ.bind("selectionchanged",e,!1,!0)},eQ.valueChanged=function(e,t,n){return eQ.bind("valuechanged",e,t,n)},eV=function(e){var t=0,n=eQ.emoticonsCache,o=String.fromCharCode(e.which);h(em,"code")||(n||(n=[],c(ts,function(e,o){n[t++]=[e,o]}),n.sort(function(e,t){return e[0].length-t[0].length}),eQ.emoticonsCache=n,eQ.longestEmoticonCode=n[n.length-1][0].length),es.replaceKeyword(eQ.emoticonsCache,!0,!0,eQ.longestEmoticonCode,tc.emoticonsCompat,o)&&(tc.emoticonsCompat&&/^\s$/.test(o)||e.preventDefault()))},e4=function(){!function(e,t){var n=/[^\s\xA0\u2002\u2003\u2009]+/,o=e&&y(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var r=0;r<o.length;r++){var i,a,l,s,c=o[r],u=c.parentNode,f=c.previousSibling,p=c.nextSibling;(f&&n.test(f.nodeValue.slice(-1))||p&&n.test((p.nodeValue||"")[0]))&&(a=-1,l=(i=t.cloneSelected()).startContainer,s=f.nodeValue||"",s+=S(c,"sceditor-emoticon"),l===p&&(a=s.length+i.startOffset),l===e&&e.childNodes[i.startOffset]===p&&(a=s.length),l===f&&(a=i.startOffset),(p=p&&p.nodeType===d?p:u.insertBefore(u.ownerDocument.createTextNode(""),p)).insertData(0,s),g(f),g(c),-1<a&&(i.setStart(p,a),i.collapse(!0),t.selectRange(i)))}}(em,es)},eQ.emoticons=function(e){return e||!1===e?((tc.emoticonsEnabled=e)?($(W,"keypress",eV),eQ.sourceMode()||(es.saveRange(),eC(),e9(!1),es.restoreRange())):(c(y(W,"img[data-sceditor-emoticon]"),function(e,t){var n=S(t,"sceditor-emoticon"),n=G.createTextNode(n);t.parentNode.replaceChild(n,t)}),b(W,"keypress",eV),e9()),eQ):tc.emoticonsEnabled},eQ.css=function(e){return eb||(eb=p("style",{id:"inline"},G),v(G.head,eb)),n(e)?(eb.styleSheet?eb.styleSheet.cssText=e:eb.innerHTML=e,eQ):eb.styleSheet?eb.styleSheet.cssText:eb.innerHTML},eI=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[r]||String.fromCharCode(r).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?i=o[r]:n[i]&&(i=n[i])),i&&(r<16||18<r)&&t.push(i),ta[t=t.join("+")]&&!1===ta[t].call(eQ)&&(e.stopPropagation(),e.preventDefault())},eQ.addShortcut=function(e,t){return e=e.toLowerCase(),n(t)?ta[e]=function(){return eS(tl[t],eQ.commands[t]),!1}:ta[e]=t,eQ},eQ.removeShortcut=function(e){return delete ta[e.toLowerCase()],eQ},eO=function(e){var t,n,o;if(!tc.disableBlockRemove&&8===e.which&&(n=es.selectedRange())&&(t=n.startContainer,0===n.startOffset&&(o=e5())&&!E(o,"body"))){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==d||t.nodeValue)return;if(!(t=t.parentNode))return}eQ.clearBlockFormatting(o),e.preventDefault()}},e5=function(){for(var e=em;!U(e)||V(e,!0);)if(!(e=e.parentNode)||E(e,"body"))return;return e},eQ.clearBlockFormatting=function(e){return!(e=e||e5())||E(e,"body")||(es.saveRange(),e.className="",_(e,"style",""),E(e,"p,div,td")||j(e,"p"),es.restoreRange()),eQ},e9=function(e){var t,n,o;eu&&(eu.hasHandler("valuechangedEvent")||e9.hasHandler)&&(o=!(n=eQ.sourceMode())&&es.hasSelection(),e=(J=!1)!==e&&!G.getElementById("sceditor-start-marker"),eo&&(clearTimeout(eo),eo=!1),o&&e&&es.saveRange(),(t=n?K.value:W.innerHTML)!==e9.lastVal&&(e9.lastVal=t,I(a,"valuechanged",{rawValue:n?eQ.val():t})),o&&e&&es.removeMarkers())},eG=function(){eo&&e9()},eY=function(e){var t=e.which,e=13===(n=eY.lastChar)||32===n,n=8===n||46===n;eY.lastChar=t,J||(13===t||32===t?e?eY.triggerNext=!0:e9():8===t||46===t?n?eY.triggerNext=!0:e9():eY.triggerNext&&(e9(),eY.triggerNext=!1),clearTimeout(eo),eo=setTimeout(function(){J||e9()},1500))},e1=function(e){(J=/start/i.test(e.type))||e9()},eK=function(){eQ.updateOriginal()},t()}ti.locale={},ti.formats={},ti.icons={},ti.command={get:function(e){return ec[e]||null},set:function(e,t){return!(!e||!t)&&((t=l(ec[e]||{},t)).remove=function(){ti.command.remove(e)},ec[e]=t,this)},remove:function(e){return ec[e]&&delete ec[e],this}},window.sceditor={command:ti.command,commands:ec,defaultOptions:en,ios:ey,isWysiwygSupported:e$,regexEscape:er,escapeEntities:ei,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!eo.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:C,attr:_,removeAttr:x,is:E,closest:h,width:F,height:H,traverse:z,rTraverse:L,parseHTML:P,hasStyling:U,convertElement:j,blockLevelList:W,canHaveChildren:q,isInline:V,copyCSS:function(e,t){t.style&&e.style&&(t.style.cssText=e.style.cssText+t.style.cssText)},fixNesting:Y,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if(e!==t&&e.contains&&e.contains(t))return e},getSibling:K,removeWhiteSpace:X,extractContents:Q,getOffset:Z,getStyle:J,hasStyle:function(e,t,n){return!!(t=J(e,t))&&(!n||t===n||Array.isArray(n)&&-1<n.indexOf(t))}},locale:ti.locale,icons:ti.icons,utils:{each:c,isEmptyObject:a,extend:l},plugins:ed.plugins,formats:ti.formats,create:function(e,t){t=t||{},m(e,".sceditor-container")||(t.runWithoutWysiwygSupport||e$)&&new ti(e,t)},instance:function(e){return e._sceditor}},e.default.sceditor=window.sceditor,e.default.fn.sceditor=function(t){var n,o=[];return this.each(function(){n=this._sceditor,"state"===t?o.push(!!n):"instance"===t?o.push(n):n||e.default.sceditor.create(this,t)}),o.length?1===o.length?o[0]:o:this}}(),function(e){"use strict";var t=e.escapeEntities,n=e.escapeUriScheme,o=e.dom,r=e.utils,i=o.css,a=o.attr,l=o.is,s=r.extend,c=r.each,u="data-sceditor-emoticon",d=e.command.get,f={always:1,never:2,auto:3},p={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(e){var t=this;d("font")._dropDown(t,e,function(e){t.insertText("[font="+e+"]","[/font]")})}},size:{txtExec:function(e){var t=this;d("size")._dropDown(t,e,function(e){t.insertText("[size="+e+"]","[/size]")})}},color:{txtExec:function(e){var t=this;d("color")._dropDown(t,e,function(e){t.insertText("[color="+e+"]","[/color]")})}},bulletlist:{txtExec:function(e,t){this.insertText("[ul]\n[li]"+t.split(/\r?\n/).join("[/li]\n[li]")+"[/li]\n[/ul]")}},orderedlist:{txtExec:function(e,t){this.insertText("[ol]\n[li]"+t.split(/\r?\n/).join("[/li]\n[li]")+"[/li]\n[/ol]")}},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(e,t){var n=this;d("image")._dropDown(n,e,t,function(e,t,o){var r="";t&&(r+=" width="+t),o&&(r+=" height="+o),n.insertText("[img"+r+"]"+e+"[/img]")})}},email:{txtExec:function(e,t){var n=this;d("email")._dropDown(n,e,function(e,o){n.insertText("[email="+e+"]"+(o||t||e)+"[/email]")})}},link:{txtExec:function(e,t){var n=this;d("link")._dropDown(n,e,function(e,o){n.insertText("[url="+e+"]"+(o||t||e)+"[/url]")})}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(e){var t=this;d("youtube")._dropDown(t,e,function(e){t.insertText("[youtube]"+e+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}},m={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:f.never,format:function(e,t){var n;return"[font="+v(n=l(e,"font")&&(n=a(e,"face"))?n:i(e,"font-family"))+"]"+t+"[/font]"},html:'<font face="{defaultattr}">{0}</font>'},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n=a(e,"size"),o=2;return -1<(n=n||i(e,"fontSize")).indexOf("px")?((n=+n.replace("px",""))<12&&(o=1),15<n&&(o=3),17<n&&(o=4),23<n&&(o=5),31<n&&(o=6),47<n&&(o=7)):o=n,"[size="+o+"]"+t+"[/size]"},html:'<font size="{defaultattr}">{!0}</font>'},color:{tags:{font:{color:null}},styles:{color:null},quoteType:f.never,format:function(e,t){var n;return"[color="+T(n=l(e,"font")&&(n=a(e,"color"))?n:e.style.color||i(e,"color"))+"]"+t+"[/color]"},html:function(e,n,o){return'<font color="'+t(T(n.defaultattr),!0)+'">'+o+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},tablew:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:"<tablew>{0}</tablew>"},trw:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<trw>{0}</trw>"},thw:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<thw>{0}</thw>"},tdw:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:"<tdw>{0}</tdw>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(e,t){return a(e,u)+t},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},allowedChildren:["#"],quoteType:f.never,format:function(e,t){var n="",r=function(t){return e.style?e.style[t]:null};return a(e,u)?t:(t=a(e,"width")||r("width"),r=a(e,"height")||r("height"),"[img"+(n=e.complete&&(t||r)||t&&r?"="+o.width(e)+"x"+o.height(e):n)+"]"+a(e,"src")+"[/img]")},html:function(e,o,r){var i="",a=o.width,l=o.height;return o.defaultattr&&(a=(o=o.defaultattr.split(/x/i))[0],l=2===o.length?o[1]:o[0]),void 0!==a&&(i+=' width="'+t(a,!0)+'"'),void 0!==l&&(i+=' height="'+t(l,!0)+'"'),"<img"+i+' src="'+n(r)+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:f.never,format:function(e,t){return"mailto:"===(e=a(e,"href")).substr(0,7)?'[email="'+e.substr(7)+'"]'+t+"[/email]":"[url="+e+"]"+t+"[/url]"},html:function(e,o,r){return o.defaultattr=t(o.defaultattr,!0)||r,'<a href="'+n(o.defaultattr)+'">'+r+"</a>"}},email:{quoteType:f.never,html:function(e,n,o){return'<a href="mailto:'+(t(n.defaultattr,!0)||o)+'">'+o+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:f.never,format:function(e,t){for(var n,o="data-author",r="",i=e.children,s=0;!n&&s<i.length;s++)l(i[s],"cite")&&(n=i[s]);return(n||a(e,o))&&(r=n&&n.textContent||a(e,o),a(e,o,r),n&&e.removeChild(n),t=this.elementToBbcode(e),r="="+r.replace(/(^\s+|\s+$)/g,""),n&&e.insertBefore(n,e.firstChild)),"[quote"+r+"]"+t+"[/quote]"},html:function(e,n,o){return"<blockquote>"+(o=n.defaultattr?"<cite>"+t(n.defaultattr)+"</cite>"+o:o)+"</blockquote>"}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,allowsEmpty:!0,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,allowsEmpty:!0,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,allowsEmpty:!0,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,allowsEmpty:!0,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(e,t){return(e=a(e,"data-youtube-id"))?"[youtube]"+e+"[/youtube]":t},html:'<iframe width="560" height="315" frameborder="0" src="https://www.youtube-nocookie.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},isInline:!1,format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},isInline:!1,format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}};function h(e,n){return e.replace(/\{([^}]+)\}/g,function(e,o){var r=!0;return"!"===o.charAt(0)&&(r=!1,o=o.substring(1)),"0"===o&&(r=!1),void 0===n[o]?e:r?t(n[o],!0):n[o]})}function g(e){return"function"==typeof e}function v(e){return e&&e.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2")}var y="open",$="content",b="newline",_="close";function x(e,t,n,o,r,i){var a=this;a.type=e,a.name=t,a.val=n,a.attrs=o||{},a.children=r||[],a.closing=i||null}function w(e){var n=this;function o(e,t){var n,o,r;return e===y&&(n=t.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))&&(r=c(n[1]),n[2]&&(n[2]=n[2].trim())&&(o=function(e){var t,n=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,o={};if("="===e.charAt(0)&&0>e.indexOf("=",1))o.defaultattr=v(e.substr(1));else for("="===e.charAt(0)&&(e="defaultattr"+e);t=n.exec(e);)o[c(t[1])]=v(t[3])||t[4];return o}(n[2]))),e===_&&(n=t.match(/\[\/([^\[\]]+)\]/))&&(r=c(n[1])),(r=e===b?"#newline":r)&&(e!==y&&e!==_||m[r])||(e=$,r="#"),new x(e,r,t,o)}function r(e,t,n){for(var o=n.length;o--;)if(n[o].type===t&&n[o].name===e)return 1}function i(e,t){return e=(e?m[e.name]:{}).allowedChildren,!n.opts.fixInvalidChildren||!e||-1<e.indexOf(t.name||"#")}function a(e,t,n){var o=/\s|=/.test(e);return g(t)?t(e,n):t!==f.never&&(t!==f.auto||o)?'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':e}function l(e){return e.length?e[e.length-1]:null}function c(e){return e.toLowerCase()}n.opts=s({},w.defaults,e),n.tokenize=function(e){var t,n,r,i=[],a=[{type:$,regex:/^([^\[\r\n]+|\[)/},{type:b,regex:/^(\r\n|\r|\n)/},{type:y,regex:/^\[[^\[\]]+\]/},{type:_,regex:/^\[\/[^\[\]]+\]/}];e:for(;e.length;){for(r=a.length;r--;)if(n=a[r].type,(t=e.match(a[r].regex))&&t[0]){i.push(o(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&i.push(o($,e)),e=""}return i},n.parse=function(e,t){var o=function(e){function t(){return l(g)}function o(e){(t()?t().children:h).push(e)}function a(e){return t()&&(c=m[t().name])&&c.closedBy&&-1<c.closedBy.indexOf(e)}for(var s,c,u,d,f,p=[],h=[],g=[];s=e.shift();)switch(f=e[0],i(t(),s)||s.type===_&&t()&&s.name===t().name||(s.name="#",s.type=$),s.type){case y:a(s.name)&&g.pop(),o(s),(c=m[s.name])&&!c.isSelfClosing&&(c.closedBy||r(s.name,_,e))?g.push(s):c&&c.isSelfClosing||(s.type=$);break;case _:if(t()&&s.name!==t().name&&a("/"+s.name)&&g.pop(),t()&&s.name===t().name)t().closing=s,g.pop();else if(r(s.name,y,g)){for(;u=g.pop();){if(u.name===s.name){u.closing=s;break}u=u.clone(),p.length&&u.children.push(l(p)),p.push(u)}for(f&&f.type===b&&(c=m[s.name])&&!1===c.isInline&&(o(f),e.shift()),o(l(p)),d=p.length;d--;)g.push(p[d]);p.length=0}else s.type=$,o(s);break;case b:t()&&f&&a((f.type===_?"/":"")+f.name)&&(f.type===_&&f.name===t().name||((c=m[t().name])&&c.breakAfter||c&&!1===c.isInline&&n.opts.breakAfterBlock&&!1!==c.breakAfter)&&g.pop()),o(s);break;default:o(s)}return h}(n.tokenize(e)),e=n.opts;return e.fixInvalidNesting&&function e(t,n,o,r){var a,s,c,u,d,f=function(e){var e=m[e.name];return!e||!1!==e.isInline};for(s=0,n=n||[],r=r||t;s<t.length;s++)if((a=t[s])&&a.type===y){if(o&&!f(a)&&(u=(p=l(n)).splitAt(a),c=1<n.length?n[n.length-2].children:r,i(a,p)&&((d=p.clone()).children=a.children,a.children=[d]),-1<(d=c.indexOf(p)))){u.children.splice(0,1),c.splice(d+1,0,a,u);var p=u.children[0];return void(p&&p.type===b&&(f(a)||(u.children.splice(0,1),c.splice(d+2,0,p))))}n.push(a),e(a.children,n,o||f(a),r),n.pop()}}(o),function e(t,o,r){var i,a,l,s,c,u,d,f,p=t.length;o&&(s=m[o.name]);for(var h=p;h--;)(i=t[h])&&(i.type===b?(a=0<h?t[h-1]:null,l=h<p-1?t[h+1]:null,f=!1,!r&&s&&!0!==s.isSelfClosing&&(a?u||l||(!1===s.isInline&&n.opts.breakEndBlock&&!1!==s.breakEnd&&(f=!0),s.breakEnd&&(f=!0),u=f):(!1===s.isInline&&n.opts.breakStartBlock&&!1!==s.breakStart&&(f=!0),s.breakStart&&(f=!0))),a&&a.type===y&&(c=m[a.name])&&(r?!1===c.isInline&&(f=!0):(!1===c.isInline&&n.opts.breakAfterBlock&&!1!==c.breakAfter&&(f=!0),c.breakAfter&&(f=!0))),!r&&!d&&l&&l.type===y&&(c=m[l.name])&&(!1===c.isInline&&n.opts.breakBeforeBlock&&!1!==c.breakBefore&&(f=!0),c.breakBefore&&(f=!0),d=f)?t.splice(h,1):(f&&t.splice(h,1),d=!1)):i.type===y&&e(i.children,i,r))}(o,null,t),e.removeEmptyTags&&function e(t){for(var n,o,r=t.length;r--;)(n=t[r])&&n.type===y&&(o=m[n.name],e(n.children),function(e){for(var t=e.length;t--;){var n=e[t].type;if(n===y||n===_||n===$&&/\S|\u00A0/.test(e[t].val))return!1}return!0}(n.children)&&o&&!o.isSelfClosing&&!o.allowsEmpty&&t.splice.apply(t,[r,1].concat(n.children)))}(o),o},n.toHTML=function(e,o){return function e(o,r){var i,a,l,s,c,u,d,f="";for(u=function(e){return!1!==(!e||(void 0!==e.isHtmlInline?e.isHtmlInline:e.isInline))};0<o.length;)if(i=o.shift()){if(i.type===y)d=i.children[i.children.length-1]||{},a=m[i.name],s=r&&u(a),l=e(i.children,!1),l=a&&a.html?(u(a)||!u(m[d.name])||a.isPreFormatted||a.skipLastLineBreak||(l+="<br />"),g(a.html)?a.html.call(n,i,i.attrs,l):(i.attrs[0]=l,h(a.html,i.attrs))):i.val+l+(i.closing?i.closing.val:"");else{if(i.type===b){if(!r){f+="<br />";continue}c||(f+="<div>"),f+="<br />",o.length||(f+="<br />"),f+="</div>\n",c=!1;continue}s=r,l=t(i.val,!0)}s&&!c?(f+="<div>",c=!0):!s&&c&&(f+="</div>\n",c=!1),f+=l}return c&&(f+="</div>\n"),f}(n.parse(e,o),!0)},n.toBBCode=function(e,t){return function e(t){for(var o,r,i,l,s,c,u,d,p,h="";0<t.length;)if(o=t.shift()){if(p=!(!(i=m[o.name])||!1!==i.isInline),l=i&&i.isSelfClosing,c=p&&n.opts.breakBeforeBlock&&!1!==i.breakBefore||i&&i.breakBefore,u=p&&!l&&n.opts.breakStartBlock&&!1!==i.breakStart||i&&i.breakStart,d=p&&n.opts.breakEndBlock&&!1!==i.breakEnd||i&&i.breakEnd,p=p&&n.opts.breakAfterBlock&&!1!==i.breakAfter||i&&i.breakAfter,s=(i?i.quoteType:null)||n.opts.quoteType||f.auto,i||o.type!==y){if(o.type===y){if(c&&(h+="\n"),h+="["+o.name,o.attrs)for(r in o.attrs.defaultattr&&(h+="="+a(o.attrs.defaultattr,s,"defaultattr"),delete o.attrs.defaultattr),o.attrs)o.attrs.hasOwnProperty(r)&&(h+=" "+r+"="+a(o.attrs[r],s,r));h+="]",u&&(h+="\n"),o.children&&(h+=e(o.children)),l||i.excludeClosing||(d&&(h+="\n"),h+="[/"+o.name+"]"),p&&(h+="\n"),o.closing&&l&&(h+=o.closing.val)}else h+=o.val}else h+=o.val,o.children&&(h+=e(o.children)),o.closing&&(h+=o.closing.val)}return h}(n.parse(e,t))}}function k(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16)).length<2?"0"+e:e}function T(e){var t;return(t=(e=e||"#000").match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+k(t[1])+k(t[2])+k(t[3]):(t=e.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:e}function C(){var e=this;e.stripQuotes=v;var t={},n={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]};function r(n,r,i){function l(e){var t=e[0],r=e[1],i=o.getStyle(n,t),e=n.parentNode;return!(!i||e&&o.hasStyle(e,t,i))&&(!r||r.includes(i))}function s(o){t[o]&&t[o][i]&&c(t[o][i],function(t,o){var i=m[t].strictMatch;if(void 0===i&&(i=e.opts.strictMatch),!o||o[i?"every":"some"]((s=i,function(e){var t=e[0],e=e[1];return("style"!==t||"CODE"!==n.nodeName)&&("style"===t&&e?e[s?"every":"some"](l):(t=a(n,t))&&(!e||e.includes(t)))}))){var s,t=m[t].format;return r=g(t)?t.call(e,n,r):function(e){var t=arguments;return e.replace(/\{(\d+)\}/g,function(e,n){return void 0!==t[+n+1]?t[+n+1]:"{"+n+"}"})}(t,r),!1}})}return s("*"),s(n.nodeName.toLowerCase()),r}function d(e){var t=function(e,i){var s="";return o.traverse(e,function(e){var c="",d=e.nodeType,f=e.nodeName.toLowerCase(),p=n[f],m=e.firstChild,h=!0;"object"==typeof i&&(h=-1<i.indexOf(f),(h=!!(l(e,"img")&&a(e,u))||h)||(p=i)),3!==d&&1!==d||(1===d?l(e,".sceditor-nlf")&&!m||("iframe"!==f&&(c=t(e,p)),h?("code"!==f&&(c=r(e,c,!1)),c=r(e,c,!0),s+=function(e,t){var n=e.nodeName.toLowerCase(),r=o.isInline;if(!r(e,!0)||"br"===n){for(var i,a,s=e.previousSibling;s&&1===s.nodeType&&!l(s,"br")&&r(s,!0)&&!s.firstChild;)s=s.previousSibling;for(;i=((a=e.parentNode)&&a.lastChild)===e,e=a,a&&i&&r(a,!0););i&&"li"!==n||(t+="\n"),"br"!==n&&s&&!l(s,"br")&&r(s,!0)&&(t="\n"+t)}return t}(e,c)):s+=c):s+=e.nodeValue)},!1,!0),s};return t(e)}function f(t,n,r){var a,s,n=new w(e.opts.parserOptions).toHTML(e.opts.bbcodeTrim?n.trim():n);return t||r?(t=n,s=document.createElement("div"),r=function(e,t){if(!o.hasStyling(e)){if(1!==e.childNodes.length||!l(e.firstChild,"br"))for(;a=e.firstChild;)s.insertBefore(a,e);!t||e!==(t=s.lastChild)&&l(t,"div")&&e.nextSibling===t&&s.insertBefore(document.createElement("br"),e),s.removeChild(e)}},i(s,"display","none"),s.innerHTML=t.replace(/<\/div>\n/g,"</div>"),(t=s.firstChild)&&l(t,"div")&&r(t,!0),(t=s.lastChild)&&l(t,"div")&&r(t),s.innerHTML):n}function h(t,n,r,a){var l,s=(r=r||document).createElement("div"),c=r.createElement("div"),u=new w(e.opts.parserOptions);for(c.innerHTML=n,i(s,"visibility","hidden"),s.appendChild(c),r.body.appendChild(s),t&&(s.insertBefore(r.createTextNode("#"),s.firstChild),s.appendChild(r.createTextNode("#"))),a&&i(c,"whiteSpace",i(a,"whiteSpace")),l=c.getElementsByClassName("sceditor-ignore");l.length;)l[0].parentNode.removeChild(l[0]);return o.removeWhiteSpace(s),c=d(c),r.body.removeChild(s),c=u.toBBCode(c,!0),c=e.opts.bbcodeTrim?c.trim():c}e.init=function(){e.opts=this.opts,e.elementToBbcode=d,c(m,function(e,n){var o=!1===n.isInline,r=m[e].tags,n=m[e].styles;n&&(t["*"]=t["*"]||{},t["*"][o]=t["*"][o]||{},t["*"][o][e]=[["style",Object.entries(n)]]),r&&c(r,function(n,r){r&&r.style&&(r.style=Object.entries(r.style)),t[n]=t[n]||{},t[n][o]=t[n][o]||{},t[n][o][e]=r&&Object.entries(r)})}),this.commands=s(!0,{},p,this.commands),this.toBBCode=e.toSource,this.fromBBCode=e.toHtml},e.toHtml=f.bind(null,!1),e.fragmentToHtml=f.bind(null,!0),e.toSource=h.bind(null,!1),e.fragmentToSource=h.bind(null,!0)}x.prototype={clone:function(){return new x(this.type,this.name,this.val,s({},this.attrs),[],this.closing?this.closing.clone():null)},splitAt:function(e){var t=this.clone(),n=this.children.indexOf(e);return -1<n&&(e=this.children.length-n,t.children=this.children.splice(n,e)),t}},w.QuoteType=f,w.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:f.auto,strictMatch:!1},C.get=function(e){return m[e]||null},C.set=function(e,t){return e&&t&&((t=s(m[e]||{},t)).remove=function(){delete m[e]},m[e]=t),this},C.rename=function(e,t){return e in m&&(m[t]=m[e],delete m[e]),this},C.remove=function(e){return e in m&&delete m[e],this},C.formatBBCodeString=h,e.formats.bbcode=C,e.BBCodeParser=w}(sceditor);